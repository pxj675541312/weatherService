# 约定与规范
## 1.说明
&emsp;&emsp;数据库、表、字段、视图等所有名称使用英文单词或英文短语或相应缩写，禁止使用汉语拼音，且均使用单数名；不建议在mysql中使用大小写混排的命名方式，因此统一使用大写，单词间用_下划线分隔，下划线数量严格控制在5个以下（包括5个）；名称尽可能详细准确的表达事物含义，但如果过于冗长，就会给操作及后面的程序编写带来诸多不便。
## 2.命名长度
&emsp;&emsp;建议当表名超过15个字符、字段名超过20个字符时就应该尝试用单词缩写重新命名，但不强制，以表达清晰和简洁综合考虑，如果名称长度在此之内，原则上讲则尽可能不用缩写以使表述具体清晰，表、字段最终的名称长度要**严格控制在30个字符以内**。
## 3.命名前缀
&emsp;&emsp;命名前缀的考虑均为项目系统下的考虑，不考虑mysql数据库本身的功能设定，考虑分两层，第一层前缀以说明名称对应的是什么对象，第二层作用是简单地区分功能。<br>
#### 数据库不同对象前缀：
| 表名 | 视图 | 存储过程 | 触发器 | 函数 |数据包 | 主键 | 外键 | 
| -- | ---- | -------- | ------ | ---- | ------ | ---- | ---- | 
| T  | V    | P        | TR     | F    | PA     | PK   | FK   | 

&emsp;&emsp;表格数量多到一定程度，在可视化管理工具中查阅浏览不太方便，这时根据业务或功能加前缀，对表格进行分类。所有表均要有前缀，不要出现有些表有、有些没有的情况。表前缀主要是为了区分不同功能的表，而非解释表的功能，表的功能由表名来解释。前面要求表名的长度要控制在30个字符以内，在此前提下，为了尽可能不影响表的命名，表前缀越短越好。<br>
#### a． 系统表（S_）：
System，系统配置相关的基本信息表。系统用户表（T_S_USER）、系统角色表（T_S_ROLE)等。<br>
#### b． 字典表（D_）：
Dictionary，非系统字典的字典表。除了数据库中的通用字典表，还有一些常见表，比如属性类型表（T_D_ENTITY_FTR）、缩写表（T_D_CHI_ABBR）等。<br>
####  c． 中间表（R_）：
Relationship，多对多关系中间表。具体命名方式建议为：R_主表名_从表名，在多对多关系中其实不分主从表，这里我们规定核心表为主表，另外一个为从表。比如用户角色关系中，用户表（S_USER）为主、角色（S_ROLE）表为从，那中间表就命名为R_USER_ROLE。当中间表名超长时，则根据实际情况缩写主从表名，建议优先缩写从表表名。<br>
#### d． 业务表（B_）：
Business，核心业务涉及的基本信息表。这里的业务是非系统配置业务相关的，比如登录、注册、权限这些业务涉及的表都是和系统配置相关的，前缀应该是S_，而非B_。如果项目庞大，涉及业务较多，可以在B后面继续加单字母区分不同的业务，BA_、BB_、BC_……，是个代号，和项目组的人员说明即可。本项目中采用如下表示方式:
BD：表示“记录的数据”；（business data）
BE：表示“实体”；（business entity）
BM：表示“模型”；（business model）
BP：表示“方案”；（business plan）
表名前缀的说明如上，已经足够明确，除此外还应该避免无谓的表格后缀。比如存储客户信息的表直接命名为Guest而非GuestInfo，存储航班信息的表直接命名为Flight而非FlightList。还有命名表时，一律使用单数形式。
## 4.缩写规则
团队对于专业领域的词汇应当有自己的词汇表，因此以本项目为基础建立自己的词汇表，缩写可采用如下几种策略，几种策略的优先等级从前到后，但不强制执行，具体的缩写优劣依据实际情况而定。
#### 常见缩写：
如果可以在字典里找到一个词的缩写，或者十分常见的缩写，就用这个做为缩写，比如：Monday=Mon、December=Dec、Error = Err、Average = Avg；
#### 首音节缩写：
取单词的第一个音节，并自下一个元音字母之前的辅音之后省略，这样表意较为清晰，且对于多音节词有较好的缩写功能，例如，INTAKE缩写为INT，BASIN缩写为BAS，RESERVOIR缩写为RES，如果下一个元音字母之前的辅音数目为2或者3个，可以仅使用第一个，后面的辅音字母也一并省略，比如centre省略为centr，不如省略为cen；
#### 辅音字母：
省略元音字母（包括半元音字母），只使用辅音字母进行省略，省略后连续的重复辅音字母仅使用一个即可（比如station如果省略STTN，则用STN即可），比如COUNT缩写为CNT，COUNTRY缩写为CNTR；
如果单词过长使省略效果不佳，则考虑使用各个音节的首个辅音字母组合在一起，如果仍然过长，则取前3位表示；
#### 单词组合缩写：
对于一个单词是组合单词或者多个单词表示一个对象实体：如果需要这一个对象实体保持独立性的情况下，首先取部分的各个单词的首字母，如果表意不清晰，可以取各部分音节的首个辅音字母组合起来，如果不够好可以对各部分采用前述省略规则，各部分之间不以下划线分开，比如rainfall station，若缩写为RS，则容易使人想到遥感，因此缩写为RFST；
如果不需要作为一个独立实体，则可以对各部分按照b规则省略，然后各部门之间以下划线连接，比如rainfall station，缩写为RNFL_STA，如果组合之后有的部分觉得过长，则可以使用对应部分各音节首个辅音字母，如RF_STA，如果还过长，则可以使用都使用首个辅音字母，RF_ST。
#### 主从表：
对于主从表，如果主表名称没有缩写而从表的名称需要缩写，则从表名称从第二个单词开始缩写，第一个名词尽可能和主表保持一致。比如企业基本信息表名称为enterprise，则企业诉讼表enterprise_litigation可简写为enterprise_ltg，企业证书表enterprise_certificate可简写为enterprise_crt。最终的数据库表及由数据库表生成的程序在集成开发环境（IDE，Integrated Development Environment ）中是按名称排列的，这样做是为了让相似功能的表、类文件排列在一起，方便开发者操作。
#### 缩写相同情况的处理：
缩写相同时，对于表序号靠后出现的那个（属性名相同时的情况采用一样的处理方式），在上述规则中选一个优先级靠后的规则进行省略，或者在缩写的第二个辅音字母后加上原单词中对应的辅音字母后的第一个字母，如果第一个字母已在缩写中，则在原单词中顺次后移，如果还不能区分，则使用数字进行标识。
## 5.字段命名
#### 主键：
关系数据库依赖于主键—它是数据库物理模式的基石。主键在物理层面上只有两个用途：
1.  惟一地标识一行。
2.  作为一个可以被外键有效引用的对象。

因此对应地，在设计物理层面的主键时所遵循的原则是：
1. 主键应当是对用户没有意义的。如果用户看到了一个表示多对多关系的连接表中的数据，并抱怨它没有什么用处，那就证明它的主键设计地很好。
2. 主键应该是单列的，以便提高连接和筛选操作的效率。
3. 永远也不要更新主键。实际上，因为主键除了惟一地标识一行之外，再没有其他的用途了，所以也就没有理由去对它更新。注：这项原则对于那些经常需要在数据转换或多数据库合并时进行数据整理的数据并不适用。
4. 主键不应包含动态变化的数据，如时间戳、创建时间列、修改时间列等。
5. 主键应当有计算机自动生成。如果由人来对主键的创建进行干预，就会使它带有除了惟一标识一行以外的意义。一旦越过这个界限，就可能产生认为修改主键的动机，这样，这种系统用来链接记录行、管理记录行的关键手段就会落入不了解数据库设计的人的手中。

因此本规范中，各表格统一主键只有一个，且所有表中的主键统一命名为ID，主键统一使用自增ID，类型统一为int。而实体的唯一编号统一用CODE表示，不建议用它作主键，也不建议使用复合主键，即便是在多对多关系的中间表中，个人还是建议用单独的字段做主键，复合字段加惟一约束。
#### 普通字段
所有的表字段中，除外键，其它字段名都无需刻意加前后缀，也不要在字段名前出现表名。这里的外键是广义上的外键，不仅包括从表引用主表主键的外键字段，还包括存放主表相应关键信息的扩展字段。
比如病人表（Patient），主键就是id而不是pateint_id，名称就是name而不是patient_name。但对于外键，比如其它表引用Patient表的主键那就是patient_id，对应Patient表的name字段那就是patient_name。如果一个表中有多个外键（字段）同时引用（对应）一张表的同一个字段，那再用其它标识，比如会诊单申请表中会诊发起医院（sender_hopital_id）和会诊接收医院（receiver_hospital_id）。
这种方式在做表连接的时候可能出现一些重名的情况，可以通过重命名的方式处理。
#### 字典字段
对于字典字段，编码字段使用Code标识。
#### 日期字段
所有表示日期时间的字段，除了已经约定好的名称，其他的都要有后缀，如果只需要精确到天则以Date为后缀，如果要精确到时分秒那就用Time作后缀。（虽然oracle中最低也会精确到秒）所以这里的后缀并不是和具体字段类型对应，而是根据实际业务情况，这个字段存储的数据多是精确到年月日还是时分秒，则后缀相应的为Date或Time。因为Time还有一个很常用的意思，就是次数，所以容易混淆，因此本规范将count作为次数。
#### 布尔型字段
本规范中建议是否注销、是否成功等类似的布尔型字段，名称前统一加is前缀，比如是否成功（is_success）、是否注销（is_active）、是否显示（is_display）等。
